(()=>{"use strict";const e=window.wp.element,t=window.wp.blocks,n=window.wp.i18n,__=e=>(0,n.__)(e,"ganonpress");function r(t){let{positions:n}=t;return(0,e.createElement)(e.Fragment,null,n.map(((t,n)=>{let{x:r,y:i}=t;return(0,e.createElement)("img",{alt:"",key:n,className:"wp-block-ganonpress-draw-brush",src:"/wp-content/plugins/ganonpress/brush.png",style:{left:100*r+"%",top:100*i+"%"}})})))}function i(t){let{children:n,className:r,addStroke:i}=t;const[s,o]=(0,e.useState)(!1),a=(0,e.createRef)();return(0,e.createElement)("div",{ref:e=>{if(e){const{x:t,y:n,width:r,height:i}=e.getBoundingClientRect();a.current={x:t,y:n,width:r,height:i}}},className:r,onPointerDown:e=>{e.target.setPointerCapture(e.pointerId),o(!0);const t=(e.clientX-a.current.x)/a.current.width,n=(e.clientY-a.current.y)/a.current.height;i(t,n)},onPointerUp:e=>{e.target.releasePointerCapture(e.pointerId),o(!1)},onPointerMove:e=>{if(!s)return;const t=(e.clientX-a.current.x)/a.current.width,n=(e.clientY-a.current.y)/a.current.height;i(t,n)}},n)}(0,t.registerBlockType)("ganonpress/draw",{title:__("GanonPress Draw"),description:__("Draw a picture for your visitors using the GanonBrush"),category:"widgets",icon:"admin-customizer",supports:{html:!1},attributes:{positions:{type:"array",default:[]}},edit(t){let{setAttributes:n,className:s,attributes:o}=t;return(0,e.createElement)(i,{className:s,addStroke:(e,t)=>n({positions:[...o.positions,{x:e,y:t}]})},(0,e.createElement)(r,{positions:o.positions}))},save(t){let{attributes:n}=t;return(0,e.createElement)("div",null,(0,e.createElement)(r,{positions:n.positions}))}})})();