{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///./src/index.js","webpack:///external {\"this\":[\"wp\",\"blocks\"]}","webpack:///external {\"this\":[\"wp\",\"element\"]}","webpack:///external {\"this\":[\"wp\",\"i18n\"]}"],"names":["__","text","translate","BRUSH_URL","registerBlockType","title","description","category","icon","supports","html","attributes","positions","type","default","edit","setAttributes","className","x","y","save","Canvas","map","index","left","top","Clicker","children","addStroke","useState","mouseDown","setMouseDown","offset","createRef","getOffset","el","getBoundingClientRect","width","height","current","handlePointerMove","e","clientX","clientY","handlePointerDown","target","setPointerCapture","pointerId","handlePointerUp","releasePointerCapture"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","import { registerBlockType } from '@wordpress/blocks';\nimport { __ as translate } from '@wordpress/i18n';\nimport { createRef, useState } from '@wordpress/element';\n\nconst __ = text => translate( text, 'ganonpress' );\n\nconst BRUSH_URL = '/wp-content/plugins/ganonpress/brush.png';\n\n/**\n * Every block starts by registering a new block type definition.\n *\n * @see https://developer.wordpress.org/block-editor/developers/block-api/#registering-a-block\n */\nregisterBlockType( 'ganonpress/draw', {\n\t/**\n\t * This is the display title for your block, which can be translated with `i18n` functions.\n\t * The block inserter will show this name.\n\t */\n\ttitle: __( 'GanonPress Draw' ),\n\n\t/**\n\t * This is a short description for your block, can be translated with `i18n` functions.\n\t * It will be shown in the Block Tab in the Settings Sidebar.\n\t */\n\tdescription: __( 'Draw a picture for your visitors using the GanonBrush', 'ganonpress' ),\n\n\t/**\n\t * Blocks are grouped into categories to help users browse and discover them.\n\t * The categories provided by core are `common`, `embed`, `formatting`, `layout` and `widgets`.\n\t */\n\tcategory: 'widgets',\n\n\t/**\n\t * An icon property should be specified to make it easier to identify a block.\n\t * These can be any of WordPress’ Dashicons, or a custom svg element.\n\t */\n\ticon: 'admin-customizer',\n\n\t/**\n\t * Optional block extended support features.\n\t */\n\tsupports: {\n\t\t// Removes support for an HTML mode.\n\t\thtml: false,\n\t},\n\n\tattributes: {\n\t\tpositions: {\n\t\t\ttype: 'array',\n\t\t\tdefault: [],\n\t\t},\n\t},\n\n\t/**\n\t * The edit function describes the structure of your block in the context of the editor.\n\t * This represents what the editor will render when the block is used.\n\t *\n\t * @see https://developer.wordpress.org/block-editor/developers/block-api/block-edit-save/#edit\n\t *\n\t * @param {Object} [props] Properties passed from the editor.\n\t *\n\t * @return {WPElement} Element to render.\n\t */\n\tedit( { setAttributes, className, attributes } ) {\n\t\treturn (\n\t\t\t<Clicker\n\t\t\t\tclassName={ className }\n\t\t\t\taddStroke={ ( x, y ) =>\n\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\tpositions: [ ...attributes.positions, { x, y } ],\n\t\t\t\t\t} )\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<Canvas positions={ attributes.positions } />\n\t\t\t</Clicker>\n\t\t);\n\t},\n\n\t/**\n\t * The save function defines the way in which the different attributes should be combined\n\t * into the final markup, which is then serialized by the block editor into `post_content`.\n\t *\n\t * @see https://developer.wordpress.org/block-editor/developers/block-api/block-edit-save/#save\n\t *\n\t * @return {WPElement} Element to render.\n\t */\n\tsave( { attributes } ) {\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<Canvas positions={ attributes.positions } />\n\t\t\t</div>\n\t\t);\n\t},\n} );\n\nfunction Canvas( { positions } ) {\n\treturn (\n\t\t<>\n\t\t\t{ positions.map( ( { x, y }, index ) => (\n\t\t\t\t<img\n\t\t\t\t\tkey={ index }\n\t\t\t\t\tclassName=\"wp-block-ganonpress-draw-brush\"\n\t\t\t\t\tsrc={ BRUSH_URL }\n\t\t\t\t\tstyle={ { left: `${ x * 100 }%`, top: `${ y * 100 }%` } }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t</>\n\t);\n}\n\nfunction Clicker( { children, className, addStroke } ) {\n\tconst [ mouseDown, setMouseDown ] = useState( false );\n\n\tconst offset = createRef();\n\tconst getOffset = el => {\n\t\tif ( el ) {\n\t\t\tconst { x, y, width, height } = el.getBoundingClientRect();\n\t\t\toffset.current = { x, y, width, height };\n\t\t}\n\t};\n\n\tconst handlePointerMove = e => {\n\t\tif ( ! mouseDown ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst x = ( e.clientX - offset.current.x ) / offset.current.width;\n\t\tconst y = ( e.clientY - offset.current.y ) / offset.current.height;\n\t\taddStroke( x, y );\n\t};\n\n\tconst handlePointerDown = e => {\n\t\te.target.setPointerCapture( e.pointerId );\n\t\tsetMouseDown( true );\n\n\t\tconst x = ( e.clientX - offset.current.x ) / offset.current.width;\n\t\tconst y = ( e.clientY - offset.current.y ) / offset.current.height;\n\t\taddStroke( x, y );\n\t};\n\n\tconst handlePointerUp = e => {\n\t\te.target.releasePointerCapture( e.pointerId );\n\t\tsetMouseDown( false );\n\t};\n\n\treturn (\n\t\t<div\n\t\t\tref={ getOffset }\n\t\t\tclassName={ className }\n\t\t\tonPointerDown={ handlePointerDown }\n\t\t\tonPointerUp={ handlePointerUp }\n\t\t\tonPointerMove={ handlePointerMove }\n\t\t>\n\t\t\t{ children }\n\t\t</div>\n\t);\n}\n","(function() { module.exports = this[\"wp\"][\"blocks\"]; }());","(function() { module.exports = this[\"wp\"][\"element\"]; }());","(function() { module.exports = this[\"wp\"][\"i18n\"]; }());"],"sourceRoot":""}